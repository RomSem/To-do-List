{"version":3,"sources":["js/Storage.js","js/Todo.js","js/index.js"],"names":["Storage","key","localStorage","getItem","setItem","JSON","stringify","item","list","getAll","push","index","value","Object","assign","propertyName","parse","splice","removeItem","getElementIndex","element","iterator","previousElementSibling","Todo","todoList","document","querySelector","letStartButton","TodoInput","addTodoButton","todoContent","doneState","createElement","appendChild","totalTodos","parentElement","addEventListener","focus","_createTodoFromInput","event","keyCode","target","storage","showTodoList","doneIcon","closest","removeIcon","editIcon","li","classList","toggle","contains","update","children","length","remove","todoCount","edit","submit","input","todo","text","createTodo","add","todoItem","checkMark","crossIcon","insertAdjacentHTML","innerHTML","forEach","style","pointerEvents","editInput","todoTextElement","textContent","prepend","okButton","textDecoration","after","newTodo","replaceWith","message","console","log"],"mappings":"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","file":"js.e5543480.map","sourceRoot":"../src","sourcesContent":["export default  class Storage {\n    constructor(key) {\n        this.key = key;\n\n        if (!localStorage.getItem(key)) { // initialize todolist if it does not exist\n            localStorage.setItem(key, JSON.stringify([]));\n        }\n    }\n\n    add(item) {\n        let list = this.getAll();\n        list.push(item);\n        localStorage.setItem(this.key, JSON.stringify(list));\n    }\n\n    get(index) {\n        return this.getAll()[index];\n    }\n\n    update (index, value) {\n        let list = this.getAll();\n        list[index] = Object.assign(list[index], value);\n        localStorage.setItem(this.key, JSON.stringify(list));\n    }\n\n    updateProperty(index, propertyName, value) {\n        let list = this.getAll();\n        list[index][propertyName] = value;\n        localStorage.setItem(this.key, JSON.stringify(list));\n    }\n\n    getAll() {\n        return JSON.parse(localStorage.getItem(this.key));\n    }\n\n    remove(index) {\n        let list = this.getAll();\n        list.splice(index, 1);\n        localStorage.setItem(this.key, JSON.stringify(list));\n    }\n\n    removeAll() {\n        localStorage.removeItem(this.key);\n    }\n}\n","import Storage from './Storage'\nimport checkMark from '../img/check-mark.svg';\nimport crossIcon from '../img/cross.svg';\n\n\nfunction getElementIndex(element) {\n    let index = 0,\n        iterator = element;\n\n    while (iterator.previousElementSibling) {\n        iterator = iterator.previousElementSibling;\n        ++index;\n    }\n\n    return index;\n}\n\n\nexport class Todo {\n    constructor() {\n        this.todoList = document.querySelector('.todo-container');\n        this.letStartButton = this.todoList.querySelector('.description > .btn');\n        this.TodoInput = this.todoList.querySelector('.todo-input > input');\n        this.addTodoButton = this.todoList.querySelector('.todo-input > .btn');\n        this.todoContent = this.todoList.querySelector('.to-dos');\n        this.doneState = false;\n\n        this.todoList = document.createElement('ul');\n        this.todoContent.appendChild(this.todoList);\n\n        this.totalTodos = document.createElement('p');\n        this.todoList.parentElement.appendChild(this.totalTodos);\n\n        this.letStartButton.addEventListener('click', () => this.TodoInput.focus());\n        this.addTodoButton.addEventListener('click', () => {\n            this._createTodoFromInput(this.TodoInput);\n        });\n        this.TodoInput.addEventListener('keydown', () => {\n            if (event.keyCode === 13) { // esc key entered\n                this._createTodoFromInput(event.target);\n            }\n        });\n\n        this.storage = new Storage('todolist');\n        this.showTodoList();\n\n        this.todoList.addEventListener('click', () => {\n            let target = event.target,\n                doneIcon = target.closest('img.todo-done'),\n                removeIcon = target.closest('img.todo-remove'),\n                editIcon = target.closest('.todo-edit'),\n                li = target.closest('.todo-item');\n\n            if (doneIcon) {\n                li.querySelector('.todo').classList.toggle('done');\n\n                this.doneState = li.querySelector('.todo').classList.contains('done');\n                this.storage.update(li.parentElement.children.length - 1 - getElementIndex(li), {doneState: this.doneState});\n\n            } else if (removeIcon) {\n                this.storage.remove(li.parentElement.children.length - 1 - getElementIndex(li));\n                li.remove();\n                this.todoCount();\n\n            } else if (editIcon) {\n                this.edit(li);\n                this.submit(li.querySelector('.editor'), li);\n            }\n\n\n        });\n    }\n\n    _createTodoFromInput(input) {\n        const todo = {text: input.value, doneState: this.doneState};\n        input.value = ''; // clear input\n        this.createTodo(todo);\n        this.storage.add(todo); // save to storage\n    }\n\n    createTodo(todo) {\n        let todoItem =\n            `<li class=\"todo-item\">\n    <p class=\"todo${todo.doneState ? ' done' : ''}\">${todo.text}</p>\n    <span class=\"control-block\">\n        <small class=\"todo-edit\">edit</small>\n        <img class=\"todo-done\" src=\"${checkMark}\">\n        <img class=\"todo-remove\" src=\"${crossIcon}\">\n    </span>\n</li>`;\n\n        this.todoList.insertAdjacentHTML('afterBegin', todoItem);\n        this.todoCount();\n    }\n\n    todoCount() {\n        this.totalTodos.innerHTML = `Total: <span>${this.todoList.children.length}</span>`;\n\n    }\n\n    showTodoList() {\n        this.storage.getAll().forEach(todo => {\n            this.createTodo(todo);\n        });\n    }\n\n    edit(li) {\n        li.querySelector('.control-block').style.pointerEvents = 'none';\n        let editInput = document.createElement(\"input\");\n        editInput.classList.add('editor');\n        let todoTextElement = li.querySelector('.todo');\n        editInput.value = todoTextElement.textContent;\n        todoTextElement.textContent = '';\n        todoTextElement.prepend(editInput);\n        li.querySelector('.todo').classList.remove('done');\n        editInput.focus();\n    }\n\n    submit (editInput, li) {\n        let okButton = document.createElement('a');\n        okButton.classList.add('btn');\n        okButton.textContent = 'Ok';\n        okButton.style.textDecoration = '';\n        editInput.after(okButton);\n\n        let newTodo = editInput;\n\n        okButton.addEventListener('click', () => {\n\n            if (newTodo.value.length > 0) {\n                li.querySelector('.todo').textContent = newTodo.value;\n                editInput.replaceWith(li.querySelector('.todo'));\n                this.storage.update(li.parentElement.children.length - 1 - getElementIndex(li), {text: newTodo.value});\n            } else {\n                let message = document.createElement('span');\n                message.textContent = 'Please, input todo, or delete that after submit.';\n                newTodo.after(message);\n            }\n\n            li.querySelector('.control-block').style.pointerEvents = '';\n            li.querySelector('.todo').classList.add('done');\n        });\n\n    }\n\n}\n","import {Todo} from './Todo.js';\n\ndocument.addEventListener(\"DOMContentLoaded\", function (event) {\n    console.log(\"DOM fully loaded and parsed\");\n\n    let todo = new Todo();\n\n\n});\n\n\n\n"]}